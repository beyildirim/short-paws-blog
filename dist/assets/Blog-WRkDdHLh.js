import{b as w,p as S,d as C,n as f,i as j,h as N,r as o,j as e,X as E,u as z,H as k,B as H,L as T}from"./index-C9of1eDw.js";import{d as A,i as L,f as B}from"./blogStore-BkgANdLv.js";import{S as M}from"./search-DLRGZ0AG.js";import{u as F,C as R,a as I,b as $}from"./usePosts-DDJrIwOa.js";const G=w()(S((t,a)=>({subscribers:[],subscribe:async l=>{const r=f(l),{subscribers:c}=a();if(!j(r))return{success:!1,message:"Please enter a valid email address"};const i=await N(r);return c.some(u=>u.emailHash===i)?{success:!1,message:"This email is already subscribed!"}:(t({subscribers:[...c,{emailHash:i,subscribedAt:new Date().toISOString()}]}),{success:!0,message:"Successfully subscribed! ðŸŽ‰"})},isSubscribed:async l=>{const r=f(l);if(!j(r))return!1;const c=await N(r);return a().subscribers.some(i=>i.emailHash===c)}}),{name:C.NEWSLETTER,version:1,migrate:t=>{if(!t||typeof t!="object")return t;const a=t;return Array.isArray(a.subscribers)?a.subscribers.every(r=>typeof r.emailHash=="string"&&r.emailHash.length>0)?a:{...a,subscribers:[]}:t}}));function P({onSearch:t,placeholder:a="Search blog posts..."}){const[l,r]=o.useState(""),[c,i]=o.useState(!1),u=A(d=>{t(d)},300),p=d=>{const m=d.target.value;r(m),u(m)},x=()=>{r(""),t("")};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          relative flex items-center border-2 rounded-lg transition-all duration-300
          ${c?"border-purple-500 shadow-md":"border-purple-300 hover:border-purple-400"}
        `,children:[e.jsx(M,{className:"absolute left-3 text-gray-400",size:20}),e.jsx("input",{type:"text",value:l,onChange:p,onFocus:()=>i(!0),onBlur:()=>i(!1),placeholder:a,className:"w-full pl-10 pr-10 py-2 rounded-lg focus:outline-none","aria-label":"Search blog posts"}),l&&e.jsx("button",{onClick:x,className:"absolute right-3 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx(E,{size:20})})]}),l&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Searching for: ",e.jsx("span",{className:"font-medium text-purple-600",children:l})]})]})}function q({tags:t,activeTag:a,onChange:l}){return t.length===0?null:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>l(null),className:`px-3 py-1 rounded-full text-sm border transition-colors ${a===null?"bg-purple-600 text-white border-purple-600":"bg-white text-purple-600 border-purple-300 hover:border-purple-500"}`,children:"All"}),t.map(r=>e.jsxs("button",{onClick:()=>l(r),className:`px-3 py-1 rounded-full text-sm border transition-colors ${a===r?"bg-purple-600 text-white border-purple-600":"bg-white text-purple-600 border-purple-300 hover:border-purple-500"}`,children:["#",r]},r))]})}function V(){const t=F(),{subscribe:a}=G(),{settings:l}=z(),[r,c]=o.useState(""),[i,u]=o.useState(null),[p,x]=o.useState(""),[d,m]=o.useState(null),y=o.useMemo(()=>Array.from(new Set(t.flatMap(s=>s.tags))).sort(),[t]),g=o.useMemo(()=>{if(!r.trim())return t;const s=r.toLowerCase();return t.filter(n=>n.title.toLowerCase().includes(s)||n.excerpt.toLowerCase().includes(s)||n.content.toLowerCase().includes(s)||n.tags.some(b=>b.toLowerCase().includes(s)))},[t,r]),h=o.useMemo(()=>i?g.filter(s=>s.tags.includes(i)):g,[g,i]),v=async s=>{s.preventDefault();const n=await a(p);m({message:n.message,isError:!n.success}),n.success&&x(""),setTimeout(()=>m(null),5e3)};return e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsxs("title",{children:["Blog | ",l.title]}),e.jsx("meta",{name:"description",content:"Read the latest insights from Gizmeli Kedi on planning, strategy, and professional development"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border-4 border-pink-500 rounded-lg p-8 shadow-lg",children:[e.jsxs("h2",{className:"text-3xl font-bold text-purple-600 mb-6 text-center flex items-center justify-center gap-2",children:[e.jsx(H,{className:"text-pink-500","aria-hidden":"true"}),"Gizmeli Kedi's Blog"]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx(P,{onSearch:c}),e.jsx(q,{tags:y,activeTag:i,onChange:u})]}),h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"No posts found ðŸ˜¿"}),e.jsx("p",{className:"text-gray-500",children:"Try a different search term"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Showing ",h.length," ",h.length===1?"post":"posts"]}),e.jsx("div",{className:"grid gap-6",children:h.map(s=>{const n=L[s.icon];return e.jsxs("article",{className:"bg-pink-50 rounded-lg p-6 transition-transform duration-300 hover:transform hover:scale-[1.02] border-2 border-purple-200",children:[s.coverImage&&e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg border-2 border-purple-200",children:e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-48 object-cover",loading:"lazy",decoding:"async"})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-white p-3 rounded-full shadow-md",children:e.jsx(n,{className:"text-purple-500",size:24})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-600 mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{size:16,"aria-hidden":"true"}),e.jsx("time",{dateTime:s.publishedAt,children:B(s.publishedAt)})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(I,{size:16,"aria-hidden":"true"}),s.readTime]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.excerpt}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map(b=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white border border-purple-200 rounded-full text-purple-700",children:["#",b]},b))}),e.jsxs(T,{to:`/blog/${s.id}`,className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-medium hover:underline",children:["Read More",e.jsx($,{size:16,className:"ml-1","aria-hidden":"true"})]})]})]})]},s.id)})})]})]}),e.jsxs("div",{className:"bg-pink-100 border-4 border-purple-400 rounded-lg p-8 shadow-lg text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-600 mb-4",children:"Subscribe to My Newsletter"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Get the latest planning insights and cat wisdom delivered to your inbox!"}),e.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:p,onChange:s=>x(s.target.value),placeholder:"Enter your email",className:"flex-grow px-4 py-2 rounded-md border-2 border-purple-300 focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 focus:outline-none",required:!0,"aria-label":"Email address for newsletter"}),e.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors duration-300",children:"Subscribe"})]}),d&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${d.isError?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:d.message})]})]})]})]})}export{V as default};
