import{c as N,b as v,p as S,d as w,n as f,i as k,g as j,h as y,r as u,j as e,X as C,u as P,H as T,B as z,L as A}from"./index-CzLXBV8w.js";import{d as L,i as R,f as H}from"./blogStore-ausktHWd.js";import{S as O}from"./search-Dmc1eoYb.js";import{u as _,C as M,a as $,b as I}from"./usePosts-BklmnvQb.js";const D=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]],F=N("BookmarkCheck",D);const K=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],V=N("Bookmark",K),q=v()(S((a,l)=>({subscribers:[],subscribe:async r=>{const s=f(r),{subscribers:i}=l(),o=j("VITE_NEWSLETTER_ENDPOINT");if(!k(s))return{success:!1,message:"Please enter a valid email address"};if(o)try{return(await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})})).ok?{success:!0,message:"Successfully subscribed! ðŸŽ‰"}:{success:!1,message:"Subscription failed. Please try again."}}catch(c){return console.error("Newsletter subscription error:",c),{success:!1,message:"Subscription failed. Please try again."}}const n=await y(s);return i.some(c=>c.emailHash===n)?{success:!1,message:"This email is already subscribed!"}:(a({subscribers:[...i,{emailHash:n,subscribedAt:new Date().toISOString()}]}),{success:!0,message:"Successfully subscribed! ðŸŽ‰"})},isSubscribed:async r=>{const s=f(r);if(!k(s)||j("VITE_NEWSLETTER_ENDPOINT"))return!1;const o=await y(s);return l().subscribers.some(n=>n.emailHash===o)}}),{name:w.NEWSLETTER,version:1,migrate:a=>{if(!a||typeof a!="object")return a;const l=a;return Array.isArray(l.subscribers)?l.subscribers.every(s=>typeof s.emailHash=="string"&&s.emailHash.length>0)?l:{...l,subscribers:[]}:a}}));function G({onSearch:a,placeholder:l="Search blog posts..."}){const[r,s]=u.useState(""),[i,o]=u.useState(!1),n=L(p=>{a(p)},300),c=p=>{const x=p.target.value;s(x),n(x)},m=()=>{s(""),a("")};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          relative flex items-center border-2 rounded-lg transition-all duration-300
          ${i?"border-purple-500 shadow-md":"border-purple-300 hover:border-purple-400"}
        `,children:[e.jsx(O,{className:"absolute left-3 text-gray-400",size:20}),e.jsx("input",{type:"text",value:r,onChange:c,onFocus:()=>o(!0),onBlur:()=>o(!1),placeholder:l,className:"w-full pl-10 pr-10 py-2 rounded-lg focus:outline-none","aria-label":"Search blog posts"}),r&&e.jsx("button",{onClick:m,className:"absolute right-3 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx(C,{size:20})})]}),r&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Searching for: ",e.jsx("span",{className:"font-medium text-purple-600",children:r})]})]})}function Q({tags:a,activeTag:l,onChange:r}){return a.length===0?null:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>r(null),className:`px-3 py-1 rounded-full text-sm border transition-colors ${l===null?"bg-purple-600 text-white border-purple-600":"bg-white text-purple-600 border-purple-300 hover:border-purple-500"}`,children:"All"}),a.map(s=>e.jsxs("button",{onClick:()=>r(s),className:`px-3 py-1 rounded-full text-sm border transition-colors ${l===s?"bg-purple-600 text-white border-purple-600":"bg-white text-purple-600 border-purple-300 hover:border-purple-500"}`,children:["#",s]},s))]})}const W=v()(S((a,l)=>({bookmarkedPosts:[],addBookmark:r=>{a(s=>({bookmarkedPosts:s.bookmarkedPosts.includes(r)?s.bookmarkedPosts:[...s.bookmarkedPosts,r]}))},removeBookmark:r=>{a(s=>({bookmarkedPosts:s.bookmarkedPosts.filter(i=>i!==r)}))},toggleBookmark:r=>l().bookmarkedPosts.includes(r)?(l().removeBookmark(r),!1):(l().addBookmark(r),!0),isBookmarked:r=>l().bookmarkedPosts.includes(r),getBookmarkCount:()=>l().bookmarkedPosts.length}),{name:w.BOOKMARKS,version:1}));function J({postId:a,size:l=20,showLabel:r=!1,className:s=""}){const{isBookmarked:i,toggleBookmark:o}=W(),n=i(a),c=m=>{m.preventDefault(),m.stopPropagation(),o(a)};return e.jsxs("button",{onClick:c,className:`flex items-center gap-1 transition-all duration-300 ${n?"text-purple-600 scale-110":"text-gray-400 hover:text-purple-500"} ${s}`,"aria-label":n?"Remove from reading list":"Add to reading list",title:n?"Remove from reading list":"Save for later",children:[n?e.jsx(F,{size:l,className:"fill-purple-200"}):e.jsx(V,{size:l}),r&&e.jsx("span",{className:"text-sm",children:n?"Saved":"Save"})]})}function ee(){const a=_(),{subscribe:l}=q(),{settings:r}=P(),[s,i]=u.useState(""),[o,n]=u.useState(null),[c,m]=u.useState(""),[p,x]=u.useState(null),E=u.useMemo(()=>Array.from(new Set(a.flatMap(t=>t.tags))).sort(),[a]),g=u.useMemo(()=>{if(!s.trim())return a;const t=s.toLowerCase();return a.filter(d=>d.title.toLowerCase().includes(t)||d.excerpt.toLowerCase().includes(t)||d.content.toLowerCase().includes(t)||d.tags.some(b=>b.toLowerCase().includes(t)))},[a,s]),h=u.useMemo(()=>o?g.filter(t=>t.tags.includes(o)):g,[g,o]),B=async t=>{t.preventDefault();const d=await l(c);x({message:d.message,isError:!d.success}),d.success&&m(""),setTimeout(()=>x(null),5e3)};return e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsxs("title",{children:["Blog | ",r.title]}),e.jsx("meta",{name:"description",content:"Read the latest insights from Gizmeli Kedi on planning, strategy, and professional development"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border-4 border-pink-500 rounded-lg p-8 shadow-lg",children:[e.jsxs("h2",{className:"text-3xl font-bold text-purple-600 mb-6 text-center flex items-center justify-center gap-2",children:[e.jsx(z,{className:"text-pink-500","aria-hidden":"true"}),"Gizmeli Kedi's Blog"]}),e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsx(G,{onSearch:i}),e.jsx(Q,{tags:E,activeTag:o,onChange:n})]}),h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"No posts found ðŸ˜¿"}),e.jsx("p",{className:"text-gray-500",children:"Try a different search term"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Showing ",h.length," ",h.length===1?"post":"posts"]}),e.jsx("div",{className:"grid gap-6",children:h.map(t=>{const d=R[t.icon];return e.jsxs("article",{className:"bg-pink-50 rounded-lg p-6 border-2 border-purple-200 hover-lift",children:[t.coverImage&&e.jsx("div",{className:"mb-4 overflow-hidden rounded-lg border-2 border-purple-200 image-overlay",children:e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-48 object-cover scale-on-hover",loading:"lazy",decoding:"async",width:1200,height:480})}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-white p-3 rounded-full shadow-md",children:e.jsx(d,{className:"text-purple-500",size:24})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-600 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{size:16,"aria-hidden":"true"}),e.jsx("time",{dateTime:t.publishedAt,children:H(t.publishedAt)})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($,{size:16,"aria-hidden":"true"}),t.readTime]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:t.excerpt}),t.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map(b=>e.jsxs("span",{className:"text-xs px-2 py-1 bg-white border border-purple-200 rounded-full text-purple-700 tag-pill cursor-pointer",children:["#",b]},b))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(A,{to:`/blog/${t.id}`,className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-medium hover:underline",children:["Read More",e.jsx(I,{size:16,className:"ml-1","aria-hidden":"true"})]}),e.jsx(J,{postId:t.id,size:20})]})]})]})]},t.id)})})]})]}),e.jsxs("div",{className:"bg-pink-100 border-4 border-purple-400 rounded-lg p-8 shadow-lg text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-600 mb-4",children:"Subscribe to My Newsletter"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Get the latest planning insights and cat wisdom delivered to your inbox!"}),e.jsxs("form",{onSubmit:B,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:c,onChange:t=>m(t.target.value),placeholder:"Enter your email",className:"flex-grow px-4 py-2 rounded-md border-2 border-purple-300 focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 focus:outline-none",required:!0,"aria-label":"Email address for newsletter"}),e.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors duration-300",children:"Subscribe"})]}),p&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${p.isError?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:p.message})]})]})]})]})}export{ee as default};
