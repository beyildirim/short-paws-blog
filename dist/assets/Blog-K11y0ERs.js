import{b as f,p as j,d as N,n as p,i as b,h as g,r as u,j as e,X as y,u as v,H as S,B as w,L as E}from"./index-SICXEzyL.js";import{d as C,u as z,i as H,f as k}from"./blogStore-DBO4hvFq.js";import{S as B}from"./search-BJQNds1_.js";import{C as T,a as L,b as R}from"./clock-DJULdGyT.js";const F=f()(j((s,o)=>({subscribers:[],subscribe:async a=>{const t=p(a),{subscribers:n}=o();if(!b(t))return{success:!1,message:"Please enter a valid email address"};const l=await g(t);return n.some(d=>d.emailHash===l)?{success:!1,message:"This email is already subscribed!"}:(s({subscribers:[...n,{emailHash:l,subscribedAt:new Date().toISOString()}]}),{success:!0,message:"Successfully subscribed! ðŸŽ‰"})},isSubscribed:async a=>{const t=p(a);if(!b(t))return!1;const n=await g(t);return o().subscribers.some(l=>l.emailHash===n)}}),{name:N.NEWSLETTER,version:1,migrate:s=>s!=null&&s.subscribers?s.subscribers.every(a=>typeof a.emailHash=="string"&&a.emailHash.length>0)?s:{...s,subscribers:[]}:s}));function G({onSearch:s,placeholder:o="Search blog posts..."}){const[a,t]=u.useState(""),[n,l]=u.useState(!1),d=C(c=>{s(c)},300),m=c=>{const h=c.target.value;t(h),d(h)},x=()=>{t(""),s("")};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:`
          relative flex items-center border-2 rounded-lg transition-all duration-300
          ${n?"border-purple-500 shadow-md":"border-purple-300 hover:border-purple-400"}
        `,children:[e.jsx(B,{className:"absolute left-3 text-gray-400",size:20}),e.jsx("input",{type:"text",value:a,onChange:m,onFocus:()=>l(!0),onBlur:()=>l(!1),placeholder:o,className:"w-full pl-10 pr-10 py-2 rounded-lg focus:outline-none","aria-label":"Search blog posts"}),a&&e.jsx("button",{onClick:x,className:"absolute right-3 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:e.jsx(y,{size:20})})]}),a&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Searching for: ",e.jsx("span",{className:"font-medium text-purple-600",children:a})]})]})}function K(){const{posts:s}=z(),{subscribe:o}=F(),{settings:a}=v(),[t,n]=u.useState(""),[l,d]=u.useState(""),[m,x]=u.useState(null),c=u.useMemo(()=>{if(!t.trim())return s;const r=t.toLowerCase();return s.filter(i=>i.title.toLowerCase().includes(r)||i.excerpt.toLowerCase().includes(r)||i.content.toLowerCase().includes(r))},[s,t]),h=async r=>{r.preventDefault();const i=await o(l);x({message:i.message,isError:!i.success}),i.success&&d(""),setTimeout(()=>x(null),5e3)};return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsxs("title",{children:["Blog | ",a.title]}),e.jsx("meta",{name:"description",content:"Read the latest insights from Gizmeli Kedi on planning, strategy, and professional development"})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white border-4 border-pink-500 rounded-lg p-8 shadow-lg",children:[e.jsxs("h2",{className:"text-3xl font-bold text-purple-600 mb-6 text-center flex items-center justify-center gap-2",children:[e.jsx(w,{className:"text-pink-500","aria-hidden":"true"}),"Gizmeli Kedi's Blog"]}),e.jsx("div",{className:"mb-6",children:e.jsx(G,{onSearch:n})}),c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 text-lg mb-2",children:"No posts found ðŸ˜¿"}),e.jsx("p",{className:"text-gray-500",children:"Try a different search term"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Showing ",c.length," ",c.length===1?"post":"posts"]}),e.jsx("div",{className:"grid gap-6",children:c.map(r=>{const i=H[r.icon];return e.jsx("article",{className:"bg-pink-50 rounded-lg p-6 transition-transform duration-300 hover:transform hover:scale-[1.02] border-2 border-purple-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 bg-white p-3 rounded-full shadow-md",children:e.jsx(i,{className:"text-purple-500",size:24})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-600 mb-2",children:r.title}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{size:16,"aria-hidden":"true"}),e.jsx("time",{dateTime:r.date,children:k(r.date)})]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(L,{size:16,"aria-hidden":"true"}),r.readTime]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:r.excerpt}),e.jsxs(E,{to:`/blog/${r.id}`,className:"inline-flex items-center text-purple-600 hover:text-purple-700 font-medium hover:underline",children:["Read More",e.jsx(R,{size:16,className:"ml-1","aria-hidden":"true"})]})]})]})},r.id)})})]})]}),e.jsxs("div",{className:"bg-pink-100 border-4 border-purple-400 rounded-lg p-8 shadow-lg text-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-purple-600 mb-4",children:"Subscribe to My Newsletter"}),e.jsx("p",{className:"text-gray-700 mb-4",children:"Get the latest planning insights and cat wisdom delivered to your inbox!"}),e.jsxs("form",{onSubmit:h,className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",value:l,onChange:r=>d(r.target.value),placeholder:"Enter your email",className:"flex-grow px-4 py-2 rounded-md border-2 border-purple-300 focus:border-purple-500 focus:ring focus:ring-purple-200 focus:ring-opacity-50 focus:outline-none",required:!0,"aria-label":"Email address for newsletter"}),e.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 transition-colors duration-300",children:"Subscribe"})]}),m&&e.jsx("div",{className:`mt-4 p-3 rounded-lg ${m.isError?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:m.message})]})]})]})]})}export{K as default};
